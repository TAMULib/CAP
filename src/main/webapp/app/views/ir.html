<div class="page-header">
  <h1>{{ir.name}} <small>({{ir.rootUri}})</small></h1>
</div>

<breadcrumbs nav="loadContainer(containerUri)" ir="ir"></breadcrumbs>

<div class="container">
  
  <h4>
    Properties 
    <span class="glyphicon glyphicon-plus clickable" ng-click="propertiesCollapsed=false" ng-show="propertiesCollapsed"></span>
    <span class="glyphicon glyphicon-minus clickable" ng-click="propertiesCollapsed=true" ng-show="!propertiesCollapsed"></span>
  </h4>
  <div class="container" ng-show="!propertiesCollapsed">        
    <div class="row">
      <dl class="dl-horizontal" ng-repeat="triple in context.properties | unique:'predicate'">
        <dt><a href="{{triple.predicate}}">{{triple.predicate | metadataLabel }}</a></dt>
        <dd ng-repeat="t in context.properties | filter:{predicate:triple.predicate}:true">
            {{t.object.split("^^")[0]}}
        </dd>
      </dl>
    </div>
  </div>

  <div class="row">
    <irsection
      context="context"
      title="'Metadata'"
      type="'metadatum'"
      list="context.metadata"
      list-element-action="loadContainer(le)"
      add-action="ir.createProperty()"
      remove-action="ir.removeProperties(items)">
      <div class="panel-body" ng-show="contentExpanded">
          <dl class="dl-horizontal" ng-repeat="triple in list | unique:'predicate'">
            <dt><a href="{{triple.predicate}}">{{triple.predicate | metadataLabel }}</a></dt>
            <dd ng-repeat="t in list | filter:{predicate:triple.predicate}:true">
                {{t.object.split("^^")[0]}}
            </dd>
          </dl>
      </div>
    </irsection>
  </div>

  <div class="row">    
    <irsection
      context="context"
      title="'Children'"
      type="'child'"
      list="context.containers"
      list-element-action="loadContainer(le)"
      add-action="openModal('#createContainer')"
      remove-action="context.removeContainers(items)">
      <ol class="list-group" ng-show="contentExpanded">
        <li  class="list-group-item" ng-repeat="le in list | filterContainers:context" ng-class="{'list-group-item-danger': selectedListElements.indexOf(le)!==-1}">
          <a href="" ng-click="listElementAction({'le':le.object})">{{le.object}}</a>
          <input ng-show="removeListElements" type="checkbox" class="pull-right" ng-checked="selectedListElements.indexOf(le)!==-1" ng-click="selectedListElements.indexOf(le)===-1?selectedListElements.push(le):selectedListElements.splice(selectedListElements.indexOf(le),1)">
        </li>
      </ol>
    </irsection>
  </div>

  <div class="row">    
    <irsection
      context="context"
      title="'Resources'"
      type="'resource'"
      list="context.resources"
      list-element-action="loadContainer(le)"
      add-action="ir.createResource()"
      remove-action="ir.removeResources(items)">
      <ol class="list-group" ng-show="contentExpanded">
        <li class="list-group-item" ng-repeat="le in list | filterResources:context" ng-class="{'list-group-item-danger': selectedListElements.indexOf(le)!==-1}">
          <a href="" ng-click="listElementAction({'le':le.object})">{{le.object}}</a>
          <input ng-show="removeListElements" type="checkbox" class="pull-right" ng-checked="selectedListElements.indexOf(le)!==-1" ng-click="selectedListElements.indexOf(le)===-1?selectedListElements.push(le):selectedListElements.splice(selectedListElements.indexOf(le),1)">
        </li>
      </ol>
    </irsection>
  </div>
</div>

<modal  
  modal-id="createContainer" 
  modal-view="views/modals/irCreateContainer.html" 
  modal-header-class="modal-header-primary"
  wvr-modal-backdrop="static">
</modal>